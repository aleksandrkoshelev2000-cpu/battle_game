<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Морской Бой</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <style>
        .wave-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M54 16.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5zm0-6c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5zm-48 6c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5zm0-6c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5zm48 36c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5zm0-6c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5zm-48 6c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5zm0-6c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5z' fill='%23007bff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        .cell {
            transition: all 0.3s ease;
            width: 60vh;
            height: 60vh;
            font-size: 3rem;
            min-width: 100px;
            min-height: 100px;
        }
        .cell:hover:not(.hit):not(.miss) {
            transform: scale(1.1);
            box-shadow: 0 0 25px rgba(0, 123, 255, 0.4);
        }
.hit {
            background-color: #dc3545 !important;
            color: white;
        }
        .miss {
            background-color: #6c757d !important;
            color: white;
        }
        .ship {
            background-color: #007bff !important;
        }
        .modal {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="bg-blue-50 min-h-screen font-sans wave-pattern overflow-hidden">
    <div class="flex h-screen w-screen">
        <!-- Game Board Column -->
        <div class="flex-1 flex flex-col items-center justify-center p-0">
<div class="relative">
                <div class="absolute -left-8 top-0 h-full flex flex-col justify-center">
                    <div class="h-[130px] flex items-center justify-center text-gray-1000 text-2xl">1</div>
                    <div class="h-[130px] flex items-center justify-center text-gray-1000 text-2xl">2</div>
                    <div class="h-[130px] flex items-center justify-center text-gray-1000 text-2xl">3</div>
                    <div class="h-[130px] flex items-center justify-center text-gray-1000 text-2xl">4</div>
                    <div class="h-[130px] flex items-center justify-center text-gray-1000 text-2xl">5
        </div>
    </div>
            <style>
                .modal input {
                    height: 60px;
                }
                .modal div {
                    padding: 1.5rem;
                }
                .modal {
                    transition: opacity 0.3s ease;
                }
                .modal h3 {
                    font-size: 2.5rem;
                }
                .modal p {
                    font-size: 1.8rem;
                }
                .modal button {
                    font-size: 1.8rem;
                    padding: 1.5rem;
                }
            </style>
<div class="absolute -top-8 left-0 w-full flex justify-center">
                    <div class="w-[130px] flex items-center justify-center text-gray-1000 text-2xl">A</div>
                    <div class="w-[130px] flex items-center justify-center text-gray-1000 text-2xl">Б</div>
                    <div class="w-[130px] flex items-center justify-center text-gray-1000 text-2xl">В</div>
                    <div class="w-[130px] flex items-center justify-center text-gray-1000 text-2xl">Г</div>
                    <div class="w-[130px] flex items-center justify-center text-gray-1000 text-2xl">Д</div>
</div>
<div class="grid grid-cols-5 gap-2" id="gameBoard">
<!-- 25 cells will be generated by JavaScript -->
                </div>
            </div>
        </div>
        <!-- Sidebar Column -->
        <div class="w-48 bg-white border-l border-blue-200 p-2 flex flex-col">
<h1 class="text-2xl font-bold text-blue-800 flex items-center mb-6">
                <i data-feather="anchor" class="mr-2"></i> Морской Бой
            </h1>

            <!-- Game Stats -->
            <div class="bg-blue-100 rounded-lg p-2 mb-2">
<div class="grid gap-4 text-center">
                    <div class="bg-white p-2 rounded-lg shadow">
<h3 class="text-lg font-medium text-gray-500">Осталось кораблей</h3>
                        <p class="text-3xl font-bold text-blue-600" id="shipsRemaining">5</p>
                    </div>
                    <div class="bg-white p-2 rounded-lg shadow">
<h3 class="text-lg font-medium text-gray-500">Выстрелов сделано</h3>
                        <p class="text-3xl font-bold text-blue-600" id="shotsFired">0</p>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="mt-auto">
                <button id="autoPlaceBtn" class="w-full bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded-lg flex items-center justify-center mb-2">
<i data-feather="cpu" class="mr-2"></i> Авторасстановка
                </button>
                <button id="resetBtn" class="w-full bg-blue-800 hover:bg-blue-900 text-white px-2 py-1 rounded-lg flex items-center justify-center">
<i data-feather="refresh-cw" class="mr-2"></i> Перезапуск
                </button>
            </div>
        </div>
</div>
    <!-- Miss Modal (Task will appear here) -->
    <div id="missModal" class="modal fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 w-full h-full flex flex-col" style="min-height: 100vh; min-width: 100vw;">
<div class="flex justify-between items-center mb-4">
                <h3 class="text-4xl font-bold text-blue-700">Промах!</h3>
                <button id="closeModalBtn" class="text-gray-500 hover:text-gray-700 text-3xl">
                    <i data-feather="x"></i>
                </button>
            </div>
            <div class="flex-grow flex items-center justify-center">
                <div class="bg-blue-50 p-8 rounded-lg w-full max-w-2xl text-center" id="taskContainer">
                    <p class="text-2xl text-gray-700 mb-4">Выполни задание чтобы продолжить:</p>
                    <p class="font-semibold mt-4 text-3xl" id="taskText">Sample task will appear here</p>
                </div>
            </div>
            <div class="mt-auto">
                <button id="continueBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-4 px-4 rounded-lg text-2xl">
                    Продолжить
                </button>
            </div>
</div>
    </div>
    <!-- Reset Password Modal -->
    <div id="resetModal" class="modal fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 hidden">
                            <div class="bg-white rounded-lg p-6 w-full h-full flex flex-col" style="min-height: 100vh; min-width: 100vw;">
<div class="flex justify-between items-center mb-4">
                <h3 class="text-4xl font-bold text-blue-700">Новая игра</h3>
                <button id="closeResetModalBtn" class="text-gray-500 hover:text-gray-700 text-3xl">
                    <i data-feather="x"></i>
                </button>
            </div>
            <div class="flex-grow flex items-center justify-center">
                <div class="w-full max-w-2xl">
                    <p class="text-2xl text-gray-700 mb-6">Введите пароль для перезапуска:</p>
                    <input type="password" id="passwordInput" class="w-full p-4 border-2 border-gray-300 rounded-lg mb-6 text-2xl" placeholder="Введите пароль">
                </div>
            </div>
            <div class="mt-auto">
                <button id="confirmResetBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-4 px-4 rounded-lg text-2xl">
                    Подтвердить
                </button>
            </div>
</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            feather.replace();
            
            // Game variables
            const boardSize = 5;
            // Add meta tag to prevent zooming on mobile
            const meta = document.createElement('meta');
            meta.name = 'viewport';
            meta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';
            document.head.appendChild(meta);
const totalShips = 5;
            let ships = [];
            let shotsFired = 0;
            let hits = 0;
            let gameBoard = [];
            let cells = [];
            
            // DOM elements
            const gameBoardElement = document.getElementById('gameBoard');
            const shipsRemainingElement = document.getElementById('shipsRemaining');
            const shotsFiredElement = document.getElementById('shotsFired');
            const autoPlaceBtn = document.getElementById('autoPlaceBtn');
            const resetBtn = document.getElementById('resetBtn');
            const missModal = document.getElementById('missModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const continueBtn = document.getElementById('continueBtn');
            const resetModal = document.getElementById('resetModal');
            const closeResetModalBtn = document.getElementById('closeResetModalBtn');
            const confirmResetBtn = document.getElementById('confirmResetBtn');
            const passwordInput = document.getElementById('passwordInput');
            const taskText = document.getElementById('taskText');
            
            // Sample tasks
            const tasks = [
                "Маша задумала число. Если к этому числу прибавить 14 и от полученной суммы отнять 12, то получится 75. Какое число задумала Маша?",
                "Решите уравнение: 232 + х = 403",
                "Решите уравнение: х - 142 = 339",
                "Решите уравнение: 240 - х = 124",
                "Решите уравнение: 35 ∙ х = 700",
                "Решите уравнение: х : 17 = 25",
                "Решите уравнение: 432 : х = 18",
                "Решите уравнение: 143 - 4х = 7",
                "Решите уравнение: 4х - 16 = 72",
                "Решите уравнение: (25 + х) : 3 = 27",
                "Решите уравнение: 13 ∙ (х - 12) = 104",
                "Петя подарил Даше на 2 цветка больше, чем Саша. Сколько цветов подарил каждый мальчик, если вместе они подарили 8 цветов?",
                "Тимофею сделали на уроке математики в 7 раз больше замечаний, чем Ивану. Сколько замечаний получил каждый, если вместе они получили 24 замечания?",
                "Бригада в первый день вспахала в 3 раза больше, чем во второй, а в третий день в 5 раз больше, чем во второй. Сколько гектаров вспахала бригада за три дня, если в третий день она вспахала на 28 гектаров больше, чем в первый?",
                "В коробке красных шаров было в 7 раз больше, чем синих. А зелёных шаров на 10 больше, чем синих. Сколько шаров каждого цвета было в коробке, если всего в коробке было 100 шаров?",
                "На полке стояло несколько книг. После того, как с неё сняли 8 книг, а затем положили 17, на ней стало 22 книги. Сколько книг было на полке первоначально?",
                "На двух полках 120 книг. На первой полке в 4 раза больше книг, чем на второй. Сколько книг на каждой полке?",
                "Лиза нашла грибов в 2 раза больше, чем Ваня. А Таня в 4 раза больше, чем Ваня. Сколько грибов нашёл каждый из ребят, если вместе они нашли 140 грибов?",
                "Данила и Виталий получили вместе 40 отметок. Причём Данила в 3 раза больше, чем Виталий. Сколько отметок получил Данила?",
                "Вопроса не будет! Выпала СЧАСТЛИВАЯ КЛЕТКА!"
];
            
            // Initialize game
            function initGame() {
                // Clear board
                gameBoardElement.innerHTML = '';
                cells = [];
                gameBoard = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
                ships = [];
                shotsFired = 0;
                hits = 0;
                
                // Update stats
                shipsRemainingElement.textContent = totalShips;
                shotsFiredElement.textContent = shotsFired;
            // Create 25 cells (5x5 grid)
            for (let i = 0; i < boardSize * boardSize; i++) {
                const row = Math.floor(i / boardSize);
                const col = i % boardSize;
                const cell = document.createElement('div');
                cell.className = 'cell w-5 h-5 flex items-center justify-center bg-blue-100 rounded cursor-pointer border border-blue-200';
cell.dataset.row = row;
                cell.dataset.col = col;
                
                const clickHandler = () => handleCellClick(row, col, cell);
                cell.addEventListener('click', clickHandler);
                cell.dataset.handler = clickHandler.toString();
                
                gameBoardElement.appendChild(cell);
                cells.push(cell);
            }
}
            // Auto place ships
            function autoPlaceShips() {
                // Clear any existing ships
                ships = [];
                gameBoard = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
                
                // Place 5 ships randomly (1x1 ships)
let shipsPlaced = 0;
                while (shipsPlaced < totalShips) {
                    const row = Math.floor(Math.random() * boardSize);
                    const col = Math.floor(Math.random() * boardSize);
                    
                    if (gameBoard[row][col] === 0) {
                        gameBoard[row][col] = 1;
                        ships.push({row, col});
                        shipsPlaced++;
                    }
                }
                // Update ships remaining display
                shipsRemainingElement.textContent = totalShips - hits;
                
                // For debugging (show ships)
                // showShips();
            }
// Show ships (for debugging)
            function showShips() {
                ships.forEach(ship => {
                    const index = ship.row * boardSize + ship.col;
                    cells[index].classList.add('ship');
                });
                
                setTimeout(() => {
                    ships.forEach(ship => {
                        const index = ship.row * boardSize + ship.col;
                        cells[index].classList.remove('ship');
                    });
                }, 2000);
            }
            
            // Handle cell click
            function handleCellClick(row, col, cell) {
                // If cell already clicked, do nothing
                if (cell.classList.contains('hit') || cell.classList.contains('miss')) {
                    return;
                }
                
                shotsFired++;
                shotsFiredElement.textContent = shotsFired;
                
                // Check if hit
                const isHit = gameBoard[row][col] === 1;
                
                if (isHit) {
                    // Mark as hit
                    cell.classList.add('hit');
                    cell.innerHTML = '<i data-feather="crosshair" class="text-white"></i>';
feather.replace();
                    
                    // Remove ship from array
                    const shipIndex = ships.findIndex(ship => ship.row === row && ship.col === col);
                    if (shipIndex !== -1) {
                        ships.splice(shipIndex, 1);
                    }
                    
                    hits++;
                    shipsRemainingElement.textContent = totalShips - hits;
                    
                    // Check if all ships sunk
                    if (hits === totalShips) {
                        setTimeout(() => {
                        const winModal = document.createElement('div');
                        winModal.className = 'fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50';
                        winModal.innerHTML = `
                            <div class="bg-white rounded-lg p-6 w-full h-full flex flex-col">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-4xl font-bold text-green-600">Вы победили!</h3>
                                    <button class="closeWinModal text-gray-500 hover:text-gray-700 text-3xl">
                                        <i data-feather="x"></i>
                                    </button>
                                </div>
                                <div class="flex-grow flex items-center justify-center">
                                    <div class="bg-green-50 p-8 rounded-lg w-full max-w-2xl text-center">
                                        <p class="text-2xl text-gray-700 mb-6">Все корабли противника потоплены!</p>
                                    </div>
                                </div>
                                <div class="mt-auto">
                                    <button class="w-full bg-blue-600 hover:bg-blue-700 text-white py-4 px-4 rounded-lg text-2xl closeWinModal">
Новая игра
                                    </button>
                                </div>
                            `;
                            document.body.appendChild(winModal);
                            feather.replace();
                            
                            document.querySelector('.closeWinModal').addEventListener('click', () => {
                                winModal.remove();
                                initGame();
                            });
                        }, 500);
} else {
                        // Show hit modal
                        const hitModal = document.createElement('div');
                        hitModal.className = 'fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50';
                        hitModal.innerHTML = `
                            <div class="bg-white rounded-lg p-6 w-full h-full flex flex-col" style="min-height: 100vh; min-width: 100vw;">
<div class="flex justify-between items-center mb-4">
                                    <h3 class="text-4xl font-bold text-green-600">Успешный выстрел!</h3>
                                    <button class="closeHitModal text-gray-500 hover:text-gray-700 text-3xl">
                                        <i data-feather="x"></i>
                                    </button>
                                </div>
                                <div class="flex-grow flex items-center justify-center">
                                    <div class="bg-green-50 p-8 rounded-lg w-full max-w-2xl text-center">
                                        <p class="text-2xl text-gray-700 mb-6">Вы попали в корабль! Продолжайте в том же духе!</p>
                                    </div>
                                </div>
                                <div class="mt-auto">
                                    <button class="w-full bg-green-600 hover:bg-green-700 text-white py-4 px-4 rounded-lg text-2xl closeHitModal">
                                        Продолжить
                                    </button>
                                </div>
<div class="flex justify-between items-center mb-4">
<button class="closeHitModal text-gray-500 hover:text-gray-700">
                                        <i data-feather="x"></i>
                                    </button>
                                </div>
</div>
                        `;
                        document.body.appendChild(hitModal);
                        feather.replace();
                        
                        const closeButtons = document.querySelectorAll('.closeHitModal');
                        closeButtons.forEach(btn => {
                            btn.addEventListener('click', () => {
                                hitModal.remove();
                            });
                        });
                    }
} else {
                    // Mark as miss with different symbol
                    cell.classList.add('miss');
                    cell.innerHTML = '<i data-feather="circle" class="text-white"></i>';
                    feather.replace();
// Show miss modal with task
                    showMissModal();
                }
            }
            
            // Show miss modal with random task
            function showMissModal() {
                const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
                taskText.textContent = randomTask;
                missModal.classList.remove('hidden');
            }
            
            // Event listeners
            autoPlaceBtn.addEventListener('click', function() {
                autoPlaceShips();
                this.disabled = true;
                this.classList.remove('bg-green-600', 'hover:bg-green-700');
                this.classList.add('bg-gray-400', 'cursor-not-allowed');
            });
            
            resetBtn.addEventListener('click', function() {
                resetModal.classList.remove('hidden');
            });
            
            closeModalBtn.addEventListener('click', function() {
                missModal.classList.add('hidden');
            });
            
            continueBtn.addEventListener('click', function() {
                missModal.classList.add('hidden');
            });
            
            closeResetModalBtn.addEventListener('click', function() {
                resetModal.classList.add('hidden');
            });
            
            confirmResetBtn.addEventListener('click', function() {
                if (passwordInput.value === '123321') {
                    resetModal.classList.add('hidden');
                    initGame();
                    autoPlaceBtn.disabled = false;
                    autoPlaceBtn.classList.remove('bg-gray-400', 'cursor-not-allowed');
                    autoPlaceBtn.classList.add('bg-green-600', 'hover:bg-green-700');
                    passwordInput.value = '';
                } else {
                    alert('Incorrect password!');
                }
            });
            // Initialize the game with disabled cells
            initGame();
            // Auto-place ships on game start
            autoPlaceShips();
            autoPlaceBtn.disabled = true;
            autoPlaceBtn.classList.remove('bg-green-600', 'hover:bg-green-700');
            autoPlaceBtn.classList.add('bg-gray-400', 'cursor-not-allowed');
});
    </script>
    <script>feather.replace();</script>
</body>
</html>




