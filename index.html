
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Морской бой</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <style>
        .wave-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M54 16.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5zm0-6c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5zm-48 6c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5zm0-6c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5zm48 36c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5zm0-6c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5zm-48 6c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5zm0-6c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5z' fill='%23007bff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        .cell {
            transition: all 0.3s ease;
            width: 80px;
            height: 80px;
            font-size: 1.5rem;
        }
.cell:hover:not(.hit):not(.miss) {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(0, 123, 255, 0.3);
        }
        .hit {
            background-color: #dc3545 !important;
            color: white;
        }
        .miss {
            background-color: #6c757d !important;
            color: white;
        }
        .ship {
            background-color: #007bff !important;
        }
        .modal {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="bg-blue-50 min-h-screen font-sans wave-pattern">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden border border-blue-200">
            <!-- Header -->
            <div class="bg-blue-600 py-4 px-6">
                <div class="flex items-center justify-between">
                    <h1 class="text-4xl font-bold text-white flex items-center">
<i data-feather="anchor" class="mr-2"></i> Морской бой
                    </h1>
                    <button id="resetBtn" class="bg-blue-800 hover:bg-blue-900 text-white px-6 py-3 rounded-lg flex items-center text-xl">
<i data-feather="refresh-cw" class="mr-2"></i> Restart
                    </button>
                        </div>
                    </div>
                </div>
</div>

            <!-- Game Area -->
            <div class="p-6">
                <div class="mb-6 text-center">
                    <h2 class="text-3xl font-semibold text-blue-800 mb-4">Battlefield</h2>
</div>
<!-- Game Board -->
                <div class="flex flex-col items-center mb-6">
                    <div class="relative">
                        <div class="absolute -left-8 top-0 h-full flex flex-col justify-center gap-[8px]">
                            <div class="h-20 flex items-center justify-center text-gray-500 text-xl">1</div>
<div class="h-12 flex items-center justify-center text-gray-500">2</div>
                            <div class="h-12 flex items-center justify-center text-gray-500">3</div>
                            <div class="h-12 flex items-center justify-center text-gray-500">4</div>
                            <div class="h-12 flex items-center justify-center text-gray-500">5</div>
                        </div>
                        <div class="absolute -top-8 left-0 w-full flex justify-center gap-[8px]">
                            <div class="w-20 flex items-center justify-center text-gray-500 text-xl">A</div>
<div class="w-12 flex items-center justify-center text-gray-500">B</div>
                            <div class="w-12 flex items-center justify-center text-gray-500">C</div>
                            <div class="w-12 flex items-center justify-center text-gray-500">D</div>
                            <div class="w-12 flex items-center justify-center text-gray-500">E</div>
                        </div>
                        <div class="grid grid-cols-5 gap-2 mb-4" id="gameBoard">
<!-- 25 cells will be generated by JavaScript -->
                    </div>
<div class="flex gap-4 mt-4">
                        <button id="autoPlaceBtn" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center text-xl mx-auto">
<i data-feather="cpu" class="mr-2"></i> Auto Arrange Ships
                        </button>
                    </div>
                </div>

                <!-- Game Stats -->
                <div class="bg-blue-100 rounded-lg p-4 mb-6">
                    <div class="grid grid-cols-2 gap-4 text-center">
                        <div class="bg-white p-3 rounded-lg shadow">
                            <h3 class="text-xl font-medium text-gray-500">Ships Remaining</h3>
                            <p class="text-4xl font-bold text-blue-600" id="shipsRemaining">5</p>
</div>
                        <div class="bg-white p-3 rounded-lg shadow">
                            <h3 class="text-xl font-medium text-gray-500">Shots Fired</h3>
                            <p class="text-4xl font-bold text-blue-600" id="shotsFired">0</p>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Miss Modal (Task will appear here) -->
    <div id="missModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-blue-700">Oops! You missed!</h3>
                <button id="closeModalBtn" class="text-gray-500 hover:text-gray-700">
                    <i data-feather="x"></i>
                </button>
            </div>
            <div class="bg-blue-50 p-4 rounded-lg mb-4" id="taskContainer">
                <p class="text-gray-700">Complete this task to continue:</p>
                <p class="font-semibold mt-2" id="taskText">Sample task will appear here</p>
            </div>
            <button id="continueBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg">
                Продолжить игру
            </button>
        </div>
    </div>

    <!-- Reset Password Modal -->
    <div id="resetModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-blue-700">Сначала</h3>
                <button id="closeResetModalBtn" class="text-gray-500 hover:text-gray-700">
                    <i data-feather="x"></i>
                </button>
            </div>
            <p class="text-gray-700 mb-4">Enter password to restart:</p>
            <input type="password" id="passwordInput" class="w-full p-2 border border-gray-300 rounded-lg mb-4" placeholder="Enter password">
            <button id="confirmResetBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg">
                Подтвердить перезапуск
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            feather.replace();
            
            // Game variables
            const boardSize = 5;
            // Add meta tag to prevent zooming on mobile
            const meta = document.createElement('meta');
            meta.name = 'viewport';
            meta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';
            document.head.appendChild(meta);
const totalShips = 5;
            let ships = [];
            let shotsFired = 0;
            let hits = 0;
            let gameBoard = [];
            let cells = [];
            
            // DOM elements
            const gameBoardElement = document.getElementById('gameBoard');
            const shipsRemainingElement = document.getElementById('shipsRemaining');
            const shotsFiredElement = document.getElementById('shotsFired');
            const autoPlaceBtn = document.getElementById('autoPlaceBtn');
            const resetBtn = document.getElementById('resetBtn');
            const missModal = document.getElementById('missModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const continueBtn = document.getElementById('continueBtn');
            const resetModal = document.getElementById('resetModal');
            const closeResetModalBtn = document.getElementById('closeResetModalBtn');
            const confirmResetBtn = document.getElementById('confirmResetBtn');
            const passwordInput = document.getElementById('passwordInput');
            const taskText = document.getElementById('taskText');
            
            // Sample tasks
            const tasks = [
                "Do 5 squats",
                "Name 3 countries that start with 'S'",
                "Say the alphabet backwards from G",
                "Touch your toes for 10 seconds",
                "Count backwards from 30 by 3s",
                "Recite the first 5 digits of pi",
                "Do 5 jumping jacks",
                "Name 4 US states that start with 'M'",
                "Sing 'Happy Birthday' in your head",
                "Balance on one leg for 15 seconds"
            ];
            
            // Initialize game
            function initGame() {
                // Clear board
                gameBoardElement.innerHTML = '';
                cells = [];
                gameBoard = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
                ships = [];
                shotsFired = 0;
                hits = 0;
                
                // Update stats
                shipsRemainingElement.textContent = totalShips;
                shotsFiredElement.textContent = shotsFired;
            // Create 25 cells (5x5 grid)
            for (let i = 0; i < boardSize * boardSize; i++) {
                const row = Math.floor(i / boardSize);
                const col = i % boardSize;
                const cell = document.createElement('div');
                cell.className = 'cell w-12 h-12 flex items-center justify-center bg-blue-100 rounded-lg cursor-pointer border border-blue-200';
                cell.dataset.row = row;
                cell.dataset.col = col;
                
                const clickHandler = () => handleCellClick(row, col, cell);
                cell.addEventListener('click', clickHandler);
                cell.dataset.handler = clickHandler.toString();
                
                gameBoardElement.appendChild(cell);
                cells.push(cell);
            }
}
            // Auto place ships
            function autoPlaceShips() {
                // Clear any existing ships
                ships = [];
                gameBoard = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
                
                // Place 5 ships randomly (1x1 ships)
let shipsPlaced = 0;
                while (shipsPlaced < totalShips) {
                    const row = Math.floor(Math.random() * boardSize);
                    const col = Math.floor(Math.random() * boardSize);
                    
                    if (gameBoard[row][col] === 0) {
                        gameBoard[row][col] = 1;
                        ships.push({row, col});
                        shipsPlaced++;
                    }
                }
                // Update ships remaining display
                shipsRemainingElement.textContent = totalShips - hits;
                
                // For debugging (show ships)
                // showShips();
            }
// Show ships (for debugging)
            function showShips() {
                ships.forEach(ship => {
                    const index = ship.row * boardSize + ship.col;
                    cells[index].classList.add('ship');
                });
                
                setTimeout(() => {
                    ships.forEach(ship => {
                        const index = ship.row * boardSize + ship.col;
                        cells[index].classList.remove('ship');
                    });
                }, 2000);
            }
            
            // Handle cell click
            function handleCellClick(row, col, cell) {
                // If cell already clicked, do nothing
                if (cell.classList.contains('hit') || cell.classList.contains('miss')) {
                    return;
                }
                
                shotsFired++;
                shotsFiredElement.textContent = shotsFired;
                
                // Check if hit
                const isHit = gameBoard[row][col] === 1;
                
                if (isHit) {
                    // Mark as hit
                    cell.classList.add('hit');
                    cell.innerHTML = '<i data-feather="crosshair" class="text-white"></i>';
feather.replace();
                    
                    // Remove ship from array
                    const shipIndex = ships.findIndex(ship => ship.row === row && ship.col === col);
                    if (shipIndex !== -1) {
                        ships.splice(shipIndex, 1);
                    }
                    
                    hits++;
                    shipsRemainingElement.textContent = totalShips - hits;
                    
                    // Check if all ships sunk
                    if (hits === totalShips) {
                        setTimeout(() => {
                            const winModal = document.createElement('div');
                            winModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                            winModal.innerHTML = `
                                <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4 text-center">
                                    <h3 class="text-2xl font-bold text-green-600 mb-4">Вы победили!</h3>
                                    <p class="text-gray-700 mb-6">Все корабли противника потоплены!</p>
                                    <button class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg closeWinModal">
                                        Новая игра
                                    </button>
                                </div>
                            `;
                            document.body.appendChild(winModal);
                            feather.replace();
                            
                            document.querySelector('.closeWinModal').addEventListener('click', () => {
                                winModal.remove();
                                initGame();
                            });
                        }, 500);
} else {
                        // Show hit modal
                        const hitModal = document.createElement('div');
                        hitModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                        hitModal.innerHTML = `
                            <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold text-green-600">Успешный выстрел!</h3>
                                    <button class="closeHitModal text-gray-500 hover:text-gray-700">
                                        <i data-feather="x"></i>
                                    </button>
                                </div>
                                <p class="text-gray-700 mb-4">Вы попали в корабль! Продолжайте в том же духе!</p>
                                <button class="w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg closeHitModal">
                                    Продолжить
                                </button>
                            </div>
                        `;
                        document.body.appendChild(hitModal);
                        feather.replace();
                        
                        const closeButtons = document.querySelectorAll('.closeHitModal');
                        closeButtons.forEach(btn => {
                            btn.addEventListener('click', () => {
                                hitModal.remove();
                            });
                        });
                    }
} else {
                    // Mark as miss with different symbol
                    cell.classList.add('miss');
                    cell.innerHTML = '<i data-feather="circle" class="text-white"></i>';
                    feather.replace();
// Show miss modal with task
                    showMissModal();
                }
            }
            
            // Show miss modal with random task
            function showMissModal() {
                const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
                taskText.textContent = randomTask;
                missModal.classList.remove('hidden');
            }
            
            // Event listeners
            autoPlaceBtn.addEventListener('click', function() {
                autoPlaceShips();
                this.disabled = true;
                this.classList.remove('bg-green-600', 'hover:bg-green-700');
                this.classList.add('bg-gray-400', 'cursor-not-allowed');
            });
            
            resetBtn.addEventListener('click', function() {
                resetModal.classList.remove('hidden');
            });
            
            closeModalBtn.addEventListener('click', function() {
                missModal.classList.add('hidden');
            });
            
            continueBtn.addEventListener('click', function() {
                missModal.classList.add('hidden');
            });
            
            closeResetModalBtn.addEventListener('click', function() {
                resetModal.classList.add('hidden');
            });
            
            confirmResetBtn.addEventListener('click', function() {
                if (passwordInput.value === '123321') {
                    resetModal.classList.add('hidden');
                    initGame();
                    autoPlaceBtn.disabled = false;
                    autoPlaceBtn.classList.remove('bg-gray-400', 'cursor-not-allowed');
                    autoPlaceBtn.classList.add('bg-green-600', 'hover:bg-green-700');
                    passwordInput.value = '';
                } else {
                    alert('Incorrect password!');
                }
            });
            // Initialize the game with disabled cells
            initGame();
            // Auto-place ships on game start
            autoPlaceShips();
            autoPlaceBtn.disabled = true;
            autoPlaceBtn.classList.remove('bg-green-600', 'hover:bg-green-700');
            autoPlaceBtn.classList.add('bg-gray-400', 'cursor-not-allowed');
});
    </script>
    <script>feather.replace();</script>
</body>

</html>
